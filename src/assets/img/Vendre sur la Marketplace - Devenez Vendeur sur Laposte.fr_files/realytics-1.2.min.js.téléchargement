!function(RY){if(!RY||!RY._v){var RY=RY||{};RY._v=1;var _cfg={COOKIE_SUBDOMAIN_ENABLED:!0,DEBUG_ENABLED:!0,ALERT_ENABLED:!1,HTTP_PROTOCOL:document&&document.location&&document.location.protocol&&"https:"==document.location.protocol?"https://":"http://",HTTPS_ENABLED:!0,URI_ZONES:{EU:{API:"api.realytics.io",API_MOBILE:"m.realytics.io",XDM:"x.realytics.io",SYNC_USER:"tc-sync.realytics.io",SYNC_SESSION:"tp.realytics.io"},US:{API:"api-us-we.realytics.net",API_MOBILE:"api-us-we.realytics.net",XDM:"api-us-we.realytics.net",SYNC_USER:"api-us-we.realytics.net",SYNC_SESSION:"api-us-we.realytics.net"},PA:{API:"api-pa-ce.realytics.net",API_MOBILE:"api-pa-ce.realytics.net",XDM:"api-pa-ce.realytics.net",SYNC_USER:"api-pa-ce.realytics.net",SYNC_SESSION:"api-pa-ce.realytics.net"},SA:{API:"api.realytics.io",API_MOBILE:"m.realytics.io",XDM:"x.realytics.io",SYNC_USER:"tc-sync.realytics.io",SYNC_SESSION:"tp.realytics.io"}},LOGGER_ENABLED:!0,LOGGER_API_ENABLED:!1,XDM_ENABLED:!1,MAIN_INSTANCE:"realytics",OPTOUT_TIMEOUT:100,RDRCT_TIMEOUT:300,XDM_TIMEOUT:5e3,USER_DAYS:365,SESSION_MIN:30,URL_MAX_SIZE:2048,PAGE_HACK:!0},_={getTypeString:function(t){return Object.prototype.toString.call(t)},getTime:function(){return Math.round((new Date).getTime())},isNative:function(t){var e=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");return"function"==typeof t&&e.test(t)}};_.isArray=_.isNative(Array.isArray)?Array.isArray:function(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"[object Array]"!=_.getTypeString(t))},_.isArrayNullOrEmpty=function(t){return!t||t.length<1},_.isDate=function(t){return!(!t||"object"!=typeof t||"[object Date]"!=_.getTypeString(t))},_.isFunction=function(t){return"function"==typeof t},_.isFunction(/x/)&&(_.isFunction=function(t){return"function"==typeof t&&"[object Function]"==_.getTypeString(t)}),_.isNull=function(t){return null===t},_.isNumber=function(t){return!!("number"==typeof t||t&&"object"==typeof t&&"[object Number]"==_.getTypeString(t))},_.isObject=function(t){return!(!t||"function"!=typeof t&&"object"!=typeof t)},_.isDomElement=function(t){return _.isObject(t)&&t.nodeType},_.isString=function(t){return!!("string"==typeof t||t&&"object"==typeof t&&"[object String]"==_.getTypeString(t))},_.isUndefined=function(t){return void 0===t},_.extend=function(t,e){if(t=t&&_.isObject(t)?t:{},e&&_.isObject(e))for(var n in e)t[n]=e[n];return t},_.reduce=function(t,e){var n;if("string"==typeof t)n=t.slice(0,e);else if(_.isArray(t)){n=[];for(var r=0;r<t.length;r++)n.push(_.reduce(t[r],e))}else if(_.isObject(t))for(var i in n={},t)n[i]=_.reduce(t[i],e);else n=t;return n},_.json=function(){return"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,i,o,s,c=gap,a=e[t];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(t)),"function"==typeof rep&&(a=rep.call(e,t,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(a)){for(o=a.length,n=0;n<o;n+=1)s[n]=str(n,a)||"null";return i=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+c+"]":"["+s.join(",")+"]",gap=c,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&(i=str(r=rep[n],a))&&s.push(quote(r)+(gap?": ":":")+i);else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a))&&s.push(quote(r)+(gap?": ":":")+i);return i=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+c+"}":"{"+s.join(",")+"}",gap=c,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,i=t[e];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(void 0!==(r=walk(i,n))?i[n]=r:delete i[n]);return reviver.call(t,e,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),{stringify:function(t){return JSON.stringify(t)},parse:function(t){return JSON.parse(t)},encode:function(t){return JSON.stringify(t)},decode:function(t){return JSON.parse(t)}}}(),_.base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){for(var e,n,r,i,o,s,c,a="",l=0,u=(t=_.utf8.encode(t)).length;l<u;)e=l<u?t.charCodeAt(l++):null,n=l<u?t.charCodeAt(l++):null,r=l<u?t.charCodeAt(l++):null,i=e>>2,o=(3&e)<<4|(null!==n?n>>4:0),s=null!==n?(15&n)<<2|(null!==r?r>>6:0):64,c=null!==r?63&r:64,a=a+this._keyStr.charAt(i)+this._keyStr.charAt(o)+this._keyStr.charAt(s)+this._keyStr.charAt(c);return a},decode:function(t){var e,n,r,i,o,s,c="",a=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");a<t.length;)e=this._keyStr.indexOf(t.charAt(a++))<<2|(i=this._keyStr.indexOf(t.charAt(a++)))>>4,n=(15&i)<<4|(o=this._keyStr.indexOf(t.charAt(a++)))>>2,r=(3&o)<<6|(s=this._keyStr.indexOf(t.charAt(a++))),c+=String.fromCharCode(e),64!=o&&(c+=String.fromCharCode(n)),64!=s&&(c+=String.fromCharCode(r));return c=_.utf8.decode(c)}},_.utf8={encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},decode:function(t){for(var e="",n=0,r=c1=c2=0;n<t.length;)(r=t.charCodeAt(n))<128?(e+=String.fromCharCode(r),n++):r>191&&r<224?(c2=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return e}},_.ryEncoder={encode:function(t){var e=function(t){var e=function(t){return t<10?"0"+t:t},n=null;return t?(n=""+e(t.getUTCFullYear()),n+="-"+e(t.getUTCMonth()+1),n+="-"+e(t.getUTCDate()),n+="T"+e(t.getUTCHours()),n+=":"+e(t.getUTCMinutes()),n+=":"+e(t.getUTCSeconds())):null},n=function(t){if(!_.isUndefined(t)&&t)if(_.isDate(t))t=e(t);else if(_.isArray(t)&&t.length>0)for(var r=0;r<t.length;r++)t[r]=n(t[r]);else if(_.isObject(t))for(var i in t)if(_.isDate(t[i]))t[i]=e(t[i]);else if(_.isArray(t[i])&&t[i]&&t[i].length>0)for(r=0;r<t[i].length;r++)t[i][r]=n(t[i][r]);else!_.isObject(t[i])||t.typeOf&&t[i]&&t[i]==t.typeOf||(t[i]=n(t[i]));return t},r=t?_.json.encode(n(t)):null;return r?_.base64.encode(r):null},decode:function(t){var e=t?_.base64.decode(t):null;return e?_.json.decode(e):null}},_.domain={_current:document.location?document.location.hostname:null,getInfo:function(t){return t&&t==_.noOvrd?_.domain._current:t}},_.url={_current:document.location?document.location.href:null,getInfo:function(t){return t&&t==_.noOvrd?_.url._current:t},getParamValue:function(t,e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n||n.length<2||!n[1]?"":decodeURIComponent(n[1]).replace(/\+/g," ")}},_.campaign={_parameters:["utm_source","utm_medium","utm_campaign","utm_content","utm_term","xtor"],_getCampaign:function(t){for(var e={},n=0,r=_.campaign._parameters,i=0;i<r.length;i++){var o=r[i],s=t?_.url.getParamValue(t,o):null;s&&""!=s&&(e[o]=s,n++)}return n<1?null:e},getInfo:function(t){return _.campaign._getCampaign(t)}},_.env={_ua:navigator?navigator.userAgent:null,_cache:{browser:null,os:null,device:null,mobile:null},isBot:!(!navigator||!/(googlebot|mediapartners|bingpreview|baiduspider|yandexbot|google web preview)/i.test(navigator.userAgent)),_uaMatch:function(t){return t.test(_.env._ua)},_uaContains:function(t){return-1!=_.env._ua.indexOf(t)},getBrowser:function(){if(null==_.env._cache.browser){var t=navigator.vendor||"",e=null,n=_.env._uaContains,r=_.env._uaMatch;e=n("Firefox")||r(/firefox/i)?"MozillaFirefox":n("MSIE")||r(/(msie|trident)/i)?"InternetExplorer":n("Chrome")||r(/chrome/i)?n("Android")||r(/crios/i)?"ChromeMobile":"Chrome":t&&-1!=t.indexOf("Apple")||r(/safari/i)&&!r(/phantom/i)?n("Mobile")?"SafariMobile":"Safari":window&&window.opera||r(/opera/i)||r(/opr/i)?n("Mini")?"OperaMini":"Opera":n("Gecko")?"MozillaGecko":r(/seamonkey\//i)?"SeaMonkey":r(/(BlackBerry|PlayBook|BB10)/i)?"BlackBerry":n("Konqueror")?"Konqueror":"",_.env._cache.browser=e}return""==_.env._cache.browser?null:_.env._cache.browser},getOs:function(){if(null==_.env._cache.os){var t=_.env._uaMatch,e=null;e=t(/Windows/i)?t(/Phone/)?"WindowsMobile":"Windows":t(/Mac/i)?"MacOS":t(/Linux/)?"Linux":t(/Unix/)?"Unix":t(/(iPhone|iPad|iPod)/)?"iOS":t(/Android/)?"Android":t(/(BlackBerry|PlayBook|BB10)/i)?"BlackBerry":"",_.env._cache.os=e}return""==_.env._cache.os?null:_.env._cache.os},getDevice:function(){if(null==_.env._cache.device){var t=_.env._uaMatch,e=null;e=t(/iPhone/)?"iPhone":t(/iPad/)?"iPad":t(/iPod/)?"iPod":t(/(BlackBerry|PlayBook|BB10)/i)?"BlackBerry":t(/Windows Phone/i)?"WindowsPhone":t(/Android/)?"AndroidDevice":null,_.env._cache.device=e}return""==_.env._cache.device?null:_.env._cache.device},isMobile:function(){if(null==_.env._cache.mobile){var t=!1;try{t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor||window.opera).substr(0,4))}catch(e){t=!1}_.env._cache.mobile=!!t}return null==_.env._cache.mobile?null:_.env._cache.mobile},getInfo:function(){if(_.env._ua){var t={},e=_.env.getBrowser(),n=_.env.getDevice(),r=_.env.getOs(),i=_.env.isMobile();return e&&(t.browser=e),n&&(t.device=n),r&&(t.os=r),t.mobile=i,t}return null}},_.noOvrd=-1,_.referrer={_current:document?document.referrer:null,_top:function(){var t=null;try{t=window&&window.top&&window.top.document?window.top.document.referrer:null}catch(e){t=null}return t}(),getInfo:function(t,e,n){var r=_.referrer;if(!e||e!=_.noOvrd)return e;if(n){var i=!1;try{i=window.self!==window.top}catch(t){i=!0}try{return i?r._top:r._current}catch(t){return null}}else try{return r._current}catch(t){return null}}},_.searchEngine={_dico:{Google:{d:"google.([^/?]*)",p:"q",e:["email.google.([^/?]*)","storage.googleapis.([^/?]*)"]},Yahoo:{d:"yahoo.com",p:"p"},Bing:{d:"bing.com",p:"q"},Baidu:{d:"baidu.com",p:"wd"},Aol:{d:"aol.([^/?]*)",p:"q"},Ask:{d:"ask.com",p:"q"},Daum:{d:"daum.net",p:"q"},Dogpile:{d:"dogpile.com",p:"q"},Duckduckgo:{d:"duckduckgo.com",p:"q"},Lycos:{d:"lycos.([^/?]*)",p:"q"},Mynet:{d:"mynet.com",p:"query"},Naver:{d:"naver.com",p:"query"},Rambler:{d:"rambler.ru",p:"query"},Search:{d:"search.com",p:"q"},Seznam:{d:"seznam.cz",p:"q"},Virgilio:{d:"virgilio.it",p:"qs"},Voila:{d:"voila.fr",p:"kw"},WpPl:{d:"wp.pl",p:"q"},Yandex:{d:"yandex.com",p:"text"},Yam:{d:"yam.com",p:"k"}},_getEngine:function(t){var e=_.searchEngine,n=null;if(t)for(var r in e._dico)if(0==t.search("https?://(.*)"+e._dico[r].d)){var i=!0;if(e._dico[r].e)for(var o=0;o<e._dico[r].e.length;o++)if(0==t.search("https?://"+e._dico[r].e[o])){i=!1;break}i&&(n=r);break}return n||null},_getQuery:function(t,e){var n=_.searchEngine,r=e?n._dico[e].p:null,i=r?_.url.getParamValue(t,r):null;return(i&&i.length>0?i:null)||null},getInfo:function(t,e){var n=_.searchEngine._getEngine(e);if(n){var r=_.searchEngine._getQuery(t,n),i={engine:n};return r&&(i.query=r),i}return null}},_.getUIID=function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(){for(var e,n=t,r=new Array(36),i=0,o=0;o<36;o++)8==o||13==o||18==o||23==o?r[o]="-":14==o?r[o]="4":(i<=2&&(i=33554432+16777216*Math.random()|0),e=15&i,i>>=4,r[o]=n[19==o?3&e|8:e]);return r.join("")}}();var _logger=function(t,e){var n=null,r=function(n,r){try{var i=!(!e.LOGGER_API_ENABLED||t.isUndefined(window.RYlogger)||!window.RYlogger||!window.RYlogger.push);if(e.LOGGER_ENABLED&&(i||!t.isUndefined(window.console)&&window.console&&window.console.log)){var o=function(e){i?window.RYlogger.push({text:e,level:r,domain:document.location?document.location.hostname:null,browser:t.env.getBrowser(),device:t.env.getDevice(),os:t.env.getOs(),mobile:t.env.isMobile()}):window.console.log(e)};i||!r||"error"!=r&&"fatal"!=r||(o=function(t){window.console.error?window.console.error(t):window.console.log(t)}),!i&&r&&"warn"==r&&(o=function(t){window.console.warn?window.console.warn(t):window.console.log(t)}),n&&(o("["+r.toUpperCase()+"] "+n.toString()),e.ALERT_ENABLED&&(!t.isUndefined(window.console)&&window.console&&window.console.log&&window.console.log("["+r.toUpperCase()+"] "+n.toString()),!t.isUndefined(alert)&&alert&&alert("["+r.toUpperCase()+"] "+n.toString())))}}catch(t){}},i=function(t,e,n){var i=t||null;e&&(i+="\n[Exception] "+(e.name&&(e.message||e.description)?(e.name?"["+e.name+"] ":"")+(e.message?e.message:"")+(!e.message&&e.description?e.description:""):e.toString())),r(i,n)},o={setUserId:function(r){if(r){n=r;try{e.LOGGER_API_ENABLED&&!t.isUndefined(window.trackJs)&&window.trackJs&&window.trackJs.configure&&window.trackJs.configure({userId:n})}catch(t){}}},trace:function(t){e.DEBUG_ENABLED&&r(t,"trace")},debug:function(t){e.DEBUG_ENABLED&&r(t,"debug")},info:function(t){r(t,"info")},warn:function(t){r(t,"warn")},error:function(t,e){i(t,e,"error")},fatal:function(t,e){i(t,e,"fatal")}};return o}(_,_cfg),_listener=function(t,e){var n=function(e,n,r){return function(i){i=i||(window?window.event:null);var o=!0;try{i&&(o=!r||!t.isFunction(r)||r(i))}catch(t){_logger.error("Fail to exec old handler.",t),o=!0}var s=n.call(e,i);return!(!t.isUndefined(o)&&!1===o||!t.isUndefined(s)&&!1===s)}},r=function(t,e,n){return!!(t&&e&&n&&t.addEventListener)&&(t.addEventListener(e,function(e){return n(t,e)},!1),!0)},i=function(t,e,r){return!!(t&&e&&r&&t.attachEvent)&&(t.attachEvent("on"+e,n(t,r)),!0)},o=function(t,e,o){return!!(t&&e&&o&&(r(t,e,o)||i(t,e,o)||function(t,e,r){if(r){var i="on"+e;return t[i]=n(t,r,t[i]),!0}}(t,e,o)))},s={onLoadedDone:!1,onScrolledDone:!1,onEvent:function(t,e,n){return o(t,e,n)},onScrolled:function(t){var e=function(){s.onScrolledDone||(s.onScrolledDone=!0,t())};o(window,"scroll",e),o(window,"touchmove",e)},onLoaded:function(e){var n=document,c=function(){s.onLoadedDone=!0,e()};if(n)if(n.addEventListener)n.readyState&&"complete"==n.readyState?c():r("DOMContentLoaded",c,!1);else if(n.attachEvent){i(n,"readystatechange",function(){n.readyState&&"complete"==n.readyState&&c()});try{if(window&&!t.isUndefined(window.frameElement)&&window.frameElement&&!t.isUndefined(n.documentElement)&&n.documentElement&&n.documentElement.doScroll){!function t(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(t,10)}c()}()}}catch(t){}}return o(window,"load",c),!0}};return s}(_),_selector=function(t,e){var n=function(e,n){var i=null;return e&&(n&&t.isString(e)||(t.isDomElement(e)?i=[e]:n&&t.isObject(e)&&e.length&&(i=r(e,!0)))),i&&i.length>0?i:null},r=function(e,r){var i=null;if(e)if(i=[],t.isArray(e)||r)for(var o=0;o<e.length;o++){var s;(s=n(e[o],!r))&&(i=i.concat(s))}else(s=n(e,!0))&&(i=i.concat(s));return i&&i.length>0?i:null},i={getDomElements:function(t){try{return r(t)}catch(t){return _logger.error("Fail to get dom elements.",t),null}}};return i}(_),Locker=function(){this._queue=[],this._locked=!1};Locker.prototype._exec=function(t){var e=this,n=this._queue.length>0?this._queue.shift():null;n?n(function(){e._exec(t)}):t()},Locker.prototype.lock=function(t){var e=this;e._queue.push(t),e._locked||(e._locked=!0,e._exec(function(){e._locked=!1}))};var _cookie=function(t,e){var n=["ac.uk","co.uk","org.uk","me.uk","ltd.uk","plc.uk","net.uk","sch.uk","gov.uk","mod.uk","mil.uk","nhs.uk","police.uk","ac.nz","co.nz","geek.nz","gen.nz","kiwi.nz","maori.nz","net.nz","org.nz","school.nz","cri.nz","govt.nz","health.nz","iwi.nz","mil.nz","parliament.nz"],r=function(t,r,i){var o=new Date;o.setTime(i);var s=o.toGMTString(),c=r?encodeURIComponent(r):"",a="";if(e.COOKIE_SUBDOMAIN_ENABLED){var l=document&&document.location&&document.location.hostname?document.location.hostname:null,u=l?l.split("."):null,_=u&&u.length>0?u[u.length-1]:null;if((_=_&&u.length>1?u[u.length-2]+"."+_:_)&&u.length>2)for(var f=0;f<n.length;f++)if(0==_.toLowerCase().indexOf(n[f])){_=u[u.length-3]+"."+_;break}var d=_||null;a=d?"; domain=."+d:""}return!!document&&(document.cookie=t+"="+c+"; expires="+s+"; path=/"+a,!0)},i={write:function(t,e,n){return r(t,e,n)}};return i.read=function(t){return function(t){var e=t+"=",n=document&&document.cookie?document.cookie.split(";"):null;if(n)for(var r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(e)){var o=i.substring(e.length,i.length);return o?decodeURIComponent(o):null}}return null}(t)},i.remove=function(e){return function(e){return r(e,"",t.getTime()+-864e5)}(e)},i.support=!navigator||!1!==navigator.cookieEnabled,i}(_,_cfg),LocalStorage=function(t,e,n){this._cu="ry_"+t+"_"+e,this._cud=_.getTime()+24*_cfg.USER_DAYS*60*60*1e3,this._cs="ry_"+t+"_so_"+e,this._csd=_.getTime()+60*_cfg.SESSION_MIN*1e3,n(_cookie.support)};LocalStorage.prototype.clearUser=function(t){_cookie.remove(this._cu),t(!0)},LocalStorage.prototype.getUser=function(t){t(_cookie.read(this._cu))},LocalStorage.prototype.setUser=function(t,e){var n=t?_.ryEncoder.decode(t):null;n=n&&n.exp?n.exp:this._cud,_cookie.write(this._cu,t,n),e(!0)},LocalStorage.prototype.clearSession=function(t){_cookie.remove(this._cs),t(!0)},LocalStorage.prototype.getSession=function(t){t(_cookie.read(this._cs))},LocalStorage.prototype.setSession=function(t,e){_cookie.write(this._cs,t,this._csd),e(!0)};var _xdm=(_instance=null,_enabled=null,_initDone=!1,_init=function(t,e){if(_initDone)if(null===_enabled)var n=setTimeout(function(){n&&clearTimeout(n),_init(t,e)},200);else e(_enabled);else{_initDone=!0;try{var r=(new Date).getTime(),i=t+"?ch="+r;(_instance=RYxdm&&RYxdm.noConflict?RYxdm.noConflict("ryXDM"+r.toString()):null)&&_instance.Rpc({remote:i,onReady:function(t){t&&null===_enabled&&e(_enabled=!0)}},{serializer:_.json,local:{},remote:{remove:{},write:{},read:{}}})}catch(t){e(_enabled=!1)}var o=setTimeout(function(){null===_enabled&&e(_enabled=!1),o&&clearTimeout(o)},_cfg.XDM_TIMEOUT)}},xdm={init:function(t,e){_init(t,function(t){e(t)})},write:function(t,e,n,r,i){_init(t,function(t){t?_instance.write(e,n,r,function(t){i(!0)},function(t){i(!1)}):i(!1)})},read:function(t,e,n){_init(t,function(t){t?_instance.read(e,function(t){n(t||null)},function(t){n(null)}):n(null)})},remove:function(t,e,n){_init(t,function(t){t?_instance.remove(e,function(t){n(!0)},function(t){n(!1)}):n(!1)})}},xdm),XdmStorage=function(t,e,n,r){this._uk="ry_"+t+"_"+e,this._ud=24*_cfg.USER_DAYS*60*60*1e3,this._sk="ry_"+t+"_so_"+e,this._sd=60*_cfg.SESSION_MIN*1e3,this._url=n,_xdm.init(this._url,function(t){r(t)})};XdmStorage.prototype.clearUser=function(t){_xdm.remove(this._url,this._uk,t)},XdmStorage.prototype.getUser=function(t){_xdm.read(this._url,this._uk,t)},XdmStorage.prototype.setUser=function(t,e){_xdm.write(this._url,this._uk,t,this._ud,e)},XdmStorage.prototype.clearSession=function(t){_xdm.remove(this._url,this._sk,t)},XdmStorage.prototype.getSession=function(t){_xdm.read(this._url,this._sk,t)},XdmStorage.prototype.setSession=function(t,e){_xdm.write(this._url,this._sk,t,this._sd,e)};var Storage=function(t,e,n,r,i){this._inst="xdm"==t?new XdmStorage(e,n,r,i):new LocalStorage(e,n,i)};Storage.prototype.clearUser=function(t){try{return this._inst.clearUser(t)}catch(e){t(!1)}},Storage.prototype.getUser=function(t){try{return this._inst.getUser(t)}catch(e){t(null)}},Storage.prototype.setUser=function(t,e){try{return this._inst.setUser(t,e)}catch(t){e(!1)}},Storage.prototype.clearSession=function(t){try{return this._inst.clearSession(t)}catch(e){t(!1)}},Storage.prototype.getSession=function(t){try{return this._inst.getSession(t)}catch(e){t(null)}},Storage.prototype.setSession=function(t,e){try{return this._inst.setSession(t,e)}catch(t){e(!1)}};var ApiSync=function(t,e,n){this._apiKey=t,this._url=n,this._q=!1===e?[]:null,this._k={img:1,js:2}};ApiSync.prototype._createParam=function(t){var e=null;try{return t&&t.id&&this._apiKey&&(e=this._apiKey.toString().toLowerCase()+"|"+t.id.toString()+"|"+(t.cid?t.cid.toString():"")),_.base64.encode(e)}catch(t){return _logger.error("Fail to crypt param data.",t),null}},ApiSync.prototype._queuePush=function(t,e){this._q&&t&&e&&this._q.push({type:t,url:e})},ApiSync.prototype._queueClear=function(){if(this._q)for(var t=0;t<this._q.length;t++){var e=this._q[t];e&&this._syncWithTypeUrl(e.type,e.url)}this._q=null},ApiSync.prototype._syncExec=function(t,e){null==this._q?this._syncWithTypeUrl(t,e):this._queuePush(t,e)},ApiSync.prototype._syncWithTypeUrl=function(t,e){t&&e&&(t==this._k.img?this._syncWithImgEl(e):t==this._k.js&&this._syncWithJsEl(e))},ApiSync.prototype._syncWithImgEl=function(t){try{if(t){var e=document.createElement("img");e.src=t,e.width=0,e.height=0,e.border="0",e.style.display="none",document.body.appendChild(e)}}catch(t){_logger.error("Fail to sync data with img.",t)}},ApiSync.prototype._syncWithJsEl=function(t){try{if(t){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=t;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}}catch(t){_logger.error("Fail to sync data with js.",t)}},ApiSync.prototype.syncWithImg=function(t){try{var e=t?this._createParam(t):null;if(e&&this._url){var n=this._url+"/"+encodeURIComponent(e);this._syncExec(this._k.img,n)}}catch(t){_logger.error("Fail to sync user with img.",t)}},ApiSync.prototype.syncWithJs=function(t,e){try{var n=t?this._createParam(t):null;if(n&&this._url){var r=this._url+"/"+encodeURIComponent(n)+e;r&&this._syncExec(this._k.js,r)}}catch(t){_logger.error("Fail to sync user with js.",t)}},ApiSync.prototype.enable=function(){try{this._queueClear()}catch(t){_logger.error("Fail to enable sync data.",t)}};var UserSync=function(t,e,n,r,i,o){this._apiKey=t,this._userApi=n?new ApiSync(t,e,r):null,this._tcApi=i?new ApiSync(t,e,o):null};UserSync.prototype.sync=function(t,e){try{if(t&&this._userApi){var n="";e&&(n+="?u="+encodeURIComponent(e.url?e.url:""),n+="&r="+encodeURIComponent(e.referrer?e.referrer:""),n+="&ts="+encodeURIComponent((new Date).getTime().toString())),this._userApi.syncWithJs(t,n)}t&&this._tcApi&&this._tcApi.syncWithImg(t)}catch(t){_logger.error("Fail to sync partner user.",t)}},UserSync.prototype.enable=function(){this._userApi&&this._userApi.enable(),this._tcApi&&this._tcApi.enable()};var SessionSync=function(t,e,n,r){this._apiKey=t,this._sessionApi=n?new ApiSync(t,e,r):null};SessionSync.prototype.sync=function(t,e,n,r){try{if(t&&this._sessionApi){var i="?ct="+(e?"1":"0");i+="&rt="+(n?"1":"0"),r&&(i+="&u="+encodeURIComponent(r.url?r.url:""),i+="&r="+encodeURIComponent(r.referrer?r.referrer:""),i+="&ts="+encodeURIComponent((new Date).getTime().toString())),this._sessionApi.syncWithJs(t,i)}}catch(t){_logger.error("Fail to sync partner session.",t)}},SessionSync.prototype.enable=function(){this._sessionApi&&this._sessionApi.enable()};var ActionSync=function(t){this._q=!1===t?[]:null};ActionSync.prototype._queuePush=function(t){this._q&&t&&this._q.push({action:t})},ActionSync.prototype._queueClear=function(){if(this._q)for(var t=0;t<this._q.length;t++){var e=this._q[t];e&&e.action&&e.action()}this._q=null},ActionSync.prototype.sync=function(t){try{t&&(null==this._q?t():this._queuePush(t))}catch(t){_logger.error("Fail to sync profile data.",t)}},ActionSync.prototype.enable=function(){try{this._queueClear()}catch(t){_logger.error("Fail to enable profile data.",t)}};var Event=function(t,e,n,r,i,o,s,c,a,l,u,_,f){if(this.c=t,this.t=e||(new Date).getTime(),s&&(this.mu={uid:s},c&&(this.mu.c_uid=c),a&&(this.mu.puid=a),l&&(this.mu.cu=l),u&&(u.firstname&&(this.mu.fn=u.firstname),u.lastname&&(this.mu.ln=u.lastname),u.gender&&(this.mu.g=u.gender),u.email&&(this.mu.e=u.email),u.created&&(this.mu.rd=u.created),u.birthdate&&(this.mu.b=u.birthdate))),n&&(this.data={n:n},r&&(this.data.v=r),i&&(this.data.tx=i),o&&(this.data.opts=o),_)){var d={};for(var h in _){var p=h?_[h]:null;p&&p.id&&(d[h]={i:p.id},p.email&&(d[h].e=p.email),p.firstname&&(d[h].f=p.firstname),p.lastname&&(d[h].l=p.lastname),p.gender&&(d[h].g=p.gender),p.created&&(d[h].c=p.created),p.birthdate&&(d[h].b=p.birthdate),p.meta&&(d[h].m=p.meta))}this.data.pr=d}if(f){var g={};f.url&&(g.u=f.url.length>_cfg.URL_MAX_SIZE?f.url.substr(0,_cfg.URL_MAX_SIZE):f.url),f.domain&&(g.d=f.domain),f.referrer&&(g.r=f.referrer.length>_cfg.URL_MAX_SIZE?f.referrer.substr(0,_cfg.URL_MAX_SIZE):f.referrer),f.se&&f.se.engine&&(g.se=f.se.engine),f.se&&f.se.query&&(g.sq=f.se.query),f.env&&f.env.browser&&(g.eb=f.env.browser),f.env&&f.env.device&&(g.ed=f.env.device),f.env&&f.env.os&&(g.eo=f.env.os),f.env&&(g.em=f.env.mobile),f.camp&&f.camp.utm_source&&(g.cs=f.camp.utm_source),f.camp&&f.camp.utm_medium&&(g.cm=f.camp.utm_medium),f.camp&&f.camp.utm_campaign&&(g.cc=f.camp.utm_campaign),f.camp&&f.camp.utm_content&&(g.co=f.camp.utm_content),f.camp&&f.camp.utm_term&&(g.ct=f.camp.utm_term),f.camp&&f.camp.xtor&&(g.cx=f.camp.xtor),g.son=!(!f.session||!f.session.origin),g.ro=f.session&&f.session.ref?f.session.ref.length>_cfg.URL_MAX_SIZE?f.session.ref.substr(0,_cfg.URL_MAX_SIZE):f.session.ref:null,this.mc={p:g}}},User=function(t,e,n,r){this.id=t||"ry_"+_.getUIID(),this.cid=e||null,this.exp=n&&_.isNumber(n)?n:_.getTime()+24*_cfg.USER_DAYS*60*60*1e3,this.cs=r||null};User.prototype.toObject=function(){return{id:this.id,cid:this.cid,exp:this.exp,cs:this.cs}};var Session=function(t,e,n,r,i,o){this.id=t||null,this.cid=e||null,this.origin=!!n,this.ref=r||null,this.cont=i||null,this.ns=!!o};Session.prototype.toObject=function(){return{id:this.id,cid:this.cid,origin:this.origin,ref:this.ref,cont:this.cont,ns:this.ns}};var Api=function(t,e,n,r){this._apiKey=t,this._http=e,this._urlPost=n,this._urlGet=r,this._first=!0};Api.prototype._get=function(t,e){try{if(t&&document&&!RY._ot){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.defer=!0,n.src=t;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}}catch(t){_logger.error("Fail to exec GET request.",t),e()}},Api.prototype._post=function(t,e,n){try{if(t&&!RY._ot){var r=null,i=null;if(!_.isUndefined(window.XMLHttpRequest)&&window.XMLHttpRequest&&(r=new window.XMLHttpRequest)&&"withCredentials"in r?(i="XMLHttpRequest",r.open("POST",t,!0),r.withCredentials=!0,r.setRequestHeader("Content-Type","text/plain")):!_.isUndefined(window.XDomainRequest)&&window.XDomainRequest&&(i="XDomainRequest",(r=new window.XDomainRequest).open("POST",t)),i&&r){r.onreadystatechange=function(){try{4===this.readyState&&200!==this.status&&201!==this.status&&202!==this.status&&203!==this.status&&204!==this.status&&n(!0,{code:this.status,method:"POST",type:i,response:this.response,timeout:this.timeout})}catch(t){_logger.error("Fail to parse request response.",t),n(!0)}};try{r.send(e)}catch(t){_logger.error("Fail to send request.",t),n(!0)}}else _logger.debug("Fail to POST, so we'll try to do a GET."),n(!1)}}catch(t){_logger.error("Fail to exec request.",t),n(!0)}},Api.prototype._send_data=function(t,e){var n=this,r="cb="+(new Date).getTime(),i=n._urlPost?n._http+n._urlPost+(n._urlGet.indexOf("?")<0?"?":"&")+r:null,o=n._urlGet?n._http+n._urlGet+(n._urlGet.indexOf("?")<0?"?":"&")+r+"&data="+encodeURIComponent(t):null,s=function(){n._get(o,function(){_logger.error("Fail to track data="+(t||""))})},c=function(){var e=_.env.getBrowser();e&&"OperaMini"==e?s():n._post(i,t,function(t,e){_logger.debug("Try GET after POST failed to send data code="+(e&&e.code?e.code:"")),s()})};if(n._first)var a=setTimeout(function(){clearTimeout(a),n._first=!1,c()},_cfg.OPTOUT_TIMEOUT);else c()},Api.prototype._send=function(t){if(-1==_cfg.HTTP_PROTOCOL.indexOf("https")||_cfg.HTTPS_ENABLED){if(!t||!_.isObject(t))throw"Fail to serialize data to send";var e=!!(t&&t.mc&&t.mc.p&&t.mc.p.em),n=_.ryEncoder.encode(t);if(!n)throw"Fail to serialize data to send";this._send_data(n,e)}},Api.prototype.track=function(t){t&&t.mu&&this._send(t)};var _trStatus={disabled:0,pending:1,enabled:2},Tracker=function(t,e,n,r,i,o,s,c,a,l,u,f,d,h,p,g,y,m){var v=this;v._apiKey=t,v._ampCookieKey="ry_amp_"+t,v.ovrdDomain=c,v.ovrdUrl=a,v.ovrdReferrer=l,v.ovrdOrganic=u,v._status=n!=_trStatus.disabled?_trStatus.pending:_trStatus.disabled,v._ready=!1,v._name=e,v._actOrd=[],v._acts={consent:[],reject:[],identify:[],track:[],trackLink:[],trackForm:[],transaction:[],page:[],profile:[],sync:[]};var S=_cfg.HTTP_PROTOCOL,k=o&&_cfg.URI_ZONES[o.toString().toUpperCase()]?_cfg.URI_ZONES[o.toString().toUpperCase()]:_cfg.URI_ZONES.EU,w=i?i.indexOf("/event/track")?i.replace("/event/track",""):i:null,b=(w||(_.env.isMobile()?k.API_MOBILE:k.API))+"/event/track",A=(w||(_.env.isMobile()?k.API_MOBILE:k.API))+"/sync/consent",E=(w||(_.env.isMobile()?k.API_MOBILE:k.API))+"/sync/reject",O=S+(w||k.SYNC_USER)+"/sync/tc",U=S+(w||k.SYNC_USER)+"/sync/us",T=S+(w||k.SYNC_SESSION)+"/sync/se";t&&"ry-srewok"==t.toLowerCase()&&(b=null),v._api=new Api(t,S,b,b),v._apiC=new Api(t,S,A,A),v._apiR=new Api(t,S,E,E),v._storage=r,v._locker=new Locker;var I=y&&m&&(_.isString(m)||_.isNumber(m))?m.toString().replace(/^\s+|\s+$/g,""):null;if(I=I&&"-1"!=I.toString()&&"0"!=I.toString()&&"null"!=I.toString().toLowerCase()?I:null,v._userEId=I,v._syncOnStart="auto"==h,v._syncOnActive="active"==h,v._syncOnConsent="consent"==h,v._syncRequested=!1,v._syncUs=new UserSync(t,v._syncOnStart,p,U,g,O),v._syncSe=new SessionSync(t,v._syncOnStart,!0,T),v._syncAc=new ActionSync(v._syncOnStart),v._status!=_trStatus.disabled){try{v._info={};var C=_.url.getInfo(v.ovrdUrl);C&&(v._info.url=C);var x=_.domain.getInfo(v.ovrdDomain);x&&(v._info.domain=x);var q=_.referrer.getInfo(v._apiKey,v.ovrdReferrer,s);q&&(v._info.referrer=q);var N=_.searchEngine.getInfo(C,q);N&&(v._info.se=N);var R=_.env.getInfo();R&&(v._info.env=R);var D=_.campaign.getInfo(C);D&&(v._info.camp=D)}catch(t){v._info={}}var L=function(){try{_logger.setUserId(v._user?v._user.id:null)}catch(t){_logger.error("Fail to configure logger user id.",t)}v._info.session=null,v._refresh(function(){try{d&&d(v._user?v._user.id:null)}catch(t){_logger.error("Fail to execute init callback.",t)}v._ready=!0,n==_trStatus.enabled&&(v.enable(),v.enableEvents())})};v._locker.lock(function(t){try{v._storage.getUser(function(e){var n=e?_.ryEncoder.decode(e):null,r=null;!n||!n.id||n&&n.exp&&_.isNumber(n.exp)&&n.exp<_.getTime()?(r=f||_cookie.read(v._ampCookieKey),v._user=r?new User(r):new User):(r=f||n.id,v._user=new User(r,n.cid?n.cid:null,n.exp?n.exp:null,n.cs?n.cs:null),(v._syncOnStart||v._syncOnActive||v._syncOnConsent&&n.cs&&"1"==n.cs.toString())&&v._sync(!0));var i=_.ryEncoder.encode(v._user.toObject());v._storage.setUser(i,function(e){t()}),v._syncUs.sync(v._user,{url:v._info.url?v._info.url:null,referrer:v._info.referrer?v._info.referrer:null}),L()})}catch(e){v._user=null,L(),t()}})}};Tracker.prototype.consent=function(){try{this._status==_trStatus.pending?this._queueAction("consent",arguments):this._status==_trStatus.enabled&&this._consent()}catch(t){_logger.error("Fail to consent.",t)}},Tracker.prototype._consent=function(){var t=this;try{var e=new Event(this._apiKey,(new Date).getTime(),"ry_consent",null,null,null,this._user?this._user.id:null,this._user?this._user.cid:null,this._userEId?this._userEId:null,null,null,null,this._info);this._apiC.track(e),t._refreshUserUp(function(t){return t?new User(t.id,t.cid,t.exp,1):null},function(){t._sync(!0)})}catch(t){_logger.error("Fail to track consent.",t)}},Tracker.prototype.disable=function(t){var e=this;e._status!=_trStatus.disabled&&(t&&e._locker.lock(function(t){e._storage.clearUser(function(){e._storage.clearSession(function(){t()})})}),e._status=_trStatus.disabled)},Tracker.prototype.enable=function(){var t=this;if(t._status==_trStatus.pending)if(t._ready)t._shiftCalls(),t._status=_trStatus.enabled,t._shiftCalls();else var e=setTimeout(function(){e&&clearTimeout(e),t.enable()},200)},Tracker.prototype.enableEvents=function(){var t=this;if(t._status==_trStatus.enabled)t._shiftEvents();else if(t._status==_trStatus.pending||_listener&&!_listener.onLoadedDone)var e=setTimeout(function(){e&&clearTimeout(e),t.enableEvents()},200)},Tracker.prototype.getUserId=function(){try{return this._user?this._user.id:null}catch(t){_logger.error("Fail to get user id.",t)}},Tracker.prototype.identify=function(t,e){try{this._status==_trStatus.pending?this._queueAction("identify",arguments):this._status==_trStatus.enabled&&this._identify(t,e)}catch(e){_logger.error("Fail to identify user="+(t?t.toString():""),e)}},Tracker.prototype._identify=function(t,e){try{var n=t&&(_.isString(t)||_.isNumber(t))?t.toString().replace(/^\s+|\s+$/g,""):null;if(n=n&&"-1"!=n.toString()&&"0"!=n.toString()&&"null"!=n.toString().toLowerCase()?n:null){var r=!_.isUndefined(e)&&null!=e&&_.isObject(e)?e:{};r.id=n,this._trackProfile({advertiser:r})}}catch(t){_logger.error("Fail to update user on identify.",t)}},Tracker.prototype.page=function(t,e,n){try{this._status==_trStatus.pending?this._queueAction("page",arguments):this._status==_trStatus.enabled&&this._page(t,e,n)}catch(e){_logger.error("Fail to track page="+(t?t.toString():""),e)}},Tracker.prototype._page=function(t,e,n){try{var r=!1;if(t&&_.isString(t))r=!0;else{var i=_.url.getInfo(this.ovrdUrl);t=i?i>_cfg.URL_MAX_SIZE?i.substr(0,_cfg.URL_MAX_SIZE):i:null}var o={page:t};e&&_.isString(e)&&(o.category=e),n&&_.isObject(n)&&(o.info=n),this._track("ry_page",o),r&&_cfg.PAGE_HACK&&this._track("ry_page_"+t)}catch(e){_logger.error("Fail to exec track page="+(t?t.toString():""),e)}},Tracker.prototype.profile=function(t){try{this._status==_trStatus.pending?this._queueAction("profile",arguments):this._status==_trStatus.enabled&&this._profile(t)}catch(t){_logger.error("Fail to profile user.",t)}},Tracker.prototype._profile=function(t){try{var e=this;e._refresh(function(){e._trackProfile(t)})}catch(t){_logger.error("Fail to update user profile.",t)}},Tracker.prototype.queue=function(t,e){try{if(!t||!_.isObject(t))return;this._queueActions(t,e)}catch(t){_logger.error("Fail to queue actions.",t)}},Tracker.prototype._queueActions=function(t,e){if(t&&_.isObject(t)){for(var n in t)if(n&&"typeOf"!=n){var r=t[n];this._acts[n]&&_.isArray(this._acts[n])?this._acts[n]=this._acts[n].concat(r&&_.isArray(r)?r:[]):_logger.warn("Fail to queue '"+n+"'.")}e&&_.isArray(e)&&(this._actOrd=this._actOrd.concat(e))}},Tracker.prototype._queueAction=function(t,e){if(t&&"typeOf"!=t)if(this._acts[t]&&_.isArray(this._acts[t])){var n=[];if(e&&e.length>0)for(var r=0;r<e.length;r++)n.push(e[r]);this._acts[t].push(n),this._actOrd.push(t)}else _logger.warn("Fail to queue '"+t+"'.")},Tracker.prototype.refreshContext=function(t){var e=this;try{t&&t.csid&&e._info&&e._info.session&&!e._info.session.cont&&e._refreshSessionCon(t,function(){e._refreshContextEnv()})}catch(t){_logger.error("Fail to refresh context.",t)}},Tracker.prototype._refreshContextEnv=function(){try{var t=this._info&&this._info.session&&this._info.session.cont?this._info.session.cont:null,e={};e.spotId=t&&t.csid?t.csid.toString():null,e.campaignId=t&&t.caid?t.caid.toString():null,e.channelId=t&&t.chid?t.chid.toString():null,e.channelName=t&&t.chn?t.chn.toString():null,e.creaId=t&&t.crid?t.crid.toString():null,window&&(window.RYcontext=e)}catch(t){_logger.error("Fail to refresh context env.",t)}},Tracker.prototype._refresh=function(t){var e=this;try{e._refreshSession(function(n){if(n&&e._trackEvent("ry_session"),e._refreshContextEnv(),n||e._info.session&&e._info.session.ns&&!e._syncRequested){e._syncRequested=!0;var r=!(!e._info.session||!e._info.session.origin),i=!e._info.session.cont;(i||r)&&e._syncSe.sync(e._user,i,r,{url:e._info.url?e._info.url:null,referrer:e._info.referrer?e._info.referrer:null}),e._syncAc.sync(function(){e._trackProfileGA()}),e._syncAc.sync(function(){e._refreshSessionSync()})}t()})}catch(t){_logger.error("Fail to refresh user info.",t)}},Tracker.prototype._refreshSession=function(t){var e=this;e._locker.lock(function(n){var r=function(r){try{var i=null,o=!1,s=r?_.ryEncoder.decode(r):null;if(e._user&&(!s||!s.id||e._user.id&&e._user.id!=s.id||e._user.cid&&(!s.cid||e._user.cid!=s.cid)||!e._user.cid&&s.cid)){if(s&&s.id)i=new Session(e._user.id,e._user.cid,s.origin,s.ref,s.cont,s.ns);else{var c=!(e._info&&(e._info.referrer&&(!e._info.se||!e._info.se.engine)||e._info.camp));if(!c&&e._info&&e._info.url){var a=_.url.getParamValue(e._info.url,"gclid"),l=_.url.getParamValue(e._info.url,"adurl");c=!(!a&&!l)}_.isUndefined(e.ovrdOrganic)||null==e.ovrdOrganic||(c=!!e.ovrdOrganic),i=new Session(e._user.id,e._user.cid,c,this._info?this._info.referrer:null,null,!0)}o=!0,r=_.ryEncoder.encode(i.toObject())}else o=!1,i=s?new Session(s.id,s.cid,s.origin,s.ref,s.cont,s.ns):null;r?e._storage.setSession(r,function(t){n()}):n()}catch(t){_logger.error("Fail to refresh session.",t),o=!1,i=null,n()}e._info&&(e._info.session=i),t(o)};try{e._storage.getSession(function(t){r(t)})}catch(t){r(null)}})},Tracker.prototype._refreshSessionCon=function(t,e){t&&t.csid&&this._info&&this._info.session&&!this._info.session.cont&&this._refreshSessionUp(function(e){return e?new Session(e.id,e.cid,e.origin,e.ref,{csid:t.csid?t.csid:null,caid:t.caid?t.caid:null,chid:t.chid?t.chid:null,crid:t.crid?t.crid:null,chn:t.chn?t.chn:null},e.ns):null},e)},Tracker.prototype._refreshSessionSync=function(){this._info&&this._info.session&&this._info.session.ns&&this._refreshSessionUp(function(t){return t?new Session(t.id,t.cid,t.origin,t.ref,t.cont,!1):null},function(){})},Tracker.prototype._refreshSessionUp=function(t,e){var n=this;n._locker.lock(function(r){var i=function(i){try{var o=i?_.ryEncoder.decode(i):null,s=t(o),c=s?_.ryEncoder.encode(s.toObject()):null;c?n._storage.setSession(c,function(t){n._info&&(n._info.session=s),r(),e()}):(r(),e())}catch(t){_logger.error("Fail to refresh session.",t),r(),e()}};try{n._storage.getSession(function(t){i(t)})}catch(t){i(null)}})},Tracker.prototype._refreshUserUp=function(t,e){var n=this;n._locker.lock(function(r){var i=function(i){try{var o=i?_.ryEncoder.decode(i):null,s=t(o);(i=s?_.ryEncoder.encode(s.toObject()):null)?n._storage.setUser(i,function(t){s&&s.id&&(n._user=s),r(),e()}):(r(),e())}catch(t){_logger.error("Fail to refresh user.",t),r(),e()}};try{n._storage.getUser(function(t){i(t)})}catch(t){i(null)}})},Tracker.prototype.reject=function(){try{this._status==_trStatus.pending?this._queueAction("reject",arguments):this._status==_trStatus.enabled&&this._reject()}catch(t){_logger.error("Fail to reject.",t)}},Tracker.prototype._reject=function(){try{var t=new Event(this._apiKey,(new Date).getTime(),"ry_reject",null,null,null,this._user?this._user.id:null,this._user?this._user.cid:null,this._userEId?this._userEId:null,null,null,null,this._info);this._apiR.track(t),this._refreshUserUp(function(t){return t?new User(t.id,t.cid,t.exp,2):null},function(){})}catch(t){_logger.error("Fail to track reject.",t)}},Tracker.prototype._shiftCalls=function(){if(this._actOrd&&_.isArray(this._actOrd)&&this._actOrd.length>0){for(var t=[];this._actOrd.length>0;){var e=this._actOrd.shift();if(e&&_.isString(e))switch(e){case"consent":this._shiftAction("consent",this._consent);break;case"reject":this._shiftAction("reject",this._reject);break;case"identify":this._shiftAction("identify",this._identify);break;case"profile":this._shiftAction("profile",this._profile);break;case"page":this._shiftAction("page",this._page);break;case"track":this._shiftAction("track",this._track);break;case"transaction":this._shiftAction("transaction",this._transaction);break;case"sync":this._shiftAction("sync",this._sync);break;case"trackLink":case"trackForm":t.push(e)}}this._actOrd=t}this._shiftActions("consent",this._consent),this._shiftActions("reject",this._reject),this._shiftActions("identify",this._identify),this._shiftActions("profile",this._profile),this._shiftActions("page",this._page),this._shiftActions("track",this._track),this._shiftActions("transaction",this._transaction),this._shiftActions("sync",this._sync)},Tracker.prototype._shiftEvents=function(){if(this._actOrd&&_.isArray(this._actOrd)&&this._actOrd.length>0){for(var t=[];this._actOrd.length>0;){var e=this._actOrd.shift();if(e&&_.isString(e))switch(e){case"consent":case"reject":case"identify":case"profile":case"page":case"track":case"transaction":case"sync":t.push(e);break;case"trackLink":this._shiftAction("trackLink",this._trackLink);break;case"trackForm":this._shiftAction("trackForm",this._trackForm)}}this._actOrd=t}this._shiftActions("trackLink",this._trackLink),this._shiftActions("trackForm",this._trackForm)},Tracker.prototype._shiftActions=function(t,e){if(this._acts&&t&&this._acts[t]&&_.isArray(this._acts[t]))for(;!_.isArrayNullOrEmpty(this._acts[t]);)this._shiftAction(t,e)},Tracker.prototype._shiftAction=function(t,e){if(t&&e&&this._acts[t]&&_.isArray(this._acts[t])&&this._acts[t].length>0){var n=this._acts[t].shift();e.apply(this,n)}},Tracker.prototype.sync=function(){try{this._status==_trStatus.pending?this._queueAction("sync",arguments):this._status==_trStatus.enabled&&this._sync(!1)}catch(t){_logger.error("Fail to sync.",t)}},Tracker.prototype._sync=function(t){try{this._syncUs&&this._syncUs.enable(),this._syncSe&&this._syncSe.enable(),this._syncAc&&this._syncAc.enable(),t||this._trackProfileGA()}catch(t){_logger.error("Fail to start synchronizers.",t)}},Tracker.prototype.syncScroll=function(){try{this._syncOnActive&&this._sync(!0)}catch(t){_logger.error("Fail to enable synchronizers on scroll.",t)}},Tracker.prototype.track=function(t,e){try{this._status==_trStatus.pending?this._queueAction("track",arguments):this._status==_trStatus.enabled&&this._track(t,e)}catch(e){_logger.error("Fail to track event="+(t?t.toString():""),e)}},Tracker.prototype.trackSync=function(t,e){try{this._trackEvent(t,e)}catch(e){_logger.error("Fail to track sync event="+(t?t.toString():""),e)}},Tracker.prototype._track=function(t,e){var n=this;try{n._refresh(function(){n._trackEvent(t,e)})}catch(e){_logger.error("Fail to exec track event="+(t?t.toString():""),e)}},Tracker.prototype._trackEvent=function(t,e){try{if(t)if(_.isString(t)){var n=_.isUndefined(e)||null==e||_.isObject(e)?e:{value:e},r=null,i=null,o=null;if(n)for(var s in n)if(s){var c=n[s];switch(s.toString().toLowerCase()){case"transaction":if(!_.isUndefined(c)&&null!=c&&(_.isObject(c)||_.isNumber(c)||_.isString(c)))if(i={},_.isObject(c)){var a=c.amount;_.isUndefined(a)||null==a||!_.isNumber(a)&&!_.isString(a)||(i.am=a);var l=c.orderId;_.isUndefined(l)||null==l||!_.isNumber(l)&&!_.isString(l)||(i.oid=l)}else i.am=c;break;case"user":if(!_.isUndefined(c)&&null!=c&&_.isObject(c)){var u=c.id;_.isUndefined(u)||null==u||!_.isNumber(u)&&!_.isString(u)||(u=(u=u&&(_.isString(u)||_.isNumber(u))?u.toString().replace(/^\s+|\s+$/g,""):null)&&"-1"!=u.toString()&&"0"!=u.toString()&&"null"!=u.toString().toLowerCase()?u:null)&&(o=u)}r||(r={}),r[s]=c;break;default:r||(r={}),r[s]=c}}var f=new Event(this._apiKey,(new Date).getTime(),t,r,i,null,this._user?this._user.id:null,o||(this._user?this._user.cid:null),this._userEId?this._userEId:null,null,null,null,this._info);this._api.track(f)}else _logger.warn("Unable to track, event not a string.");else _logger.warn("Unable to track, event not valid.")}catch(t){_logger.error("Fail to track event with api.",t)}},Tracker.prototype._trackProfile=function(t){try{var e=!_.isUndefined(t)&&null!=t&&_.isObject(t)?t:null,n={},r=!1;if(e)for(var i in e)if(i){var o=e[i.toString().toLowerCase()];if(o&&_.isObject(o))for(var s in n[i]={},o){var c=s.toString().toLowerCase(),a=o[s];switch(c){case"id":case"firstname":case"lastname":case"gender":case"email":case"created":case"birthdate":"id"==c&&(r=!0),n||(n[i]={}),n[i][c]=a;break;default:n||(n[i]={}),n.meta||(n[i].meta={}),n[i].meta[c]=a}}}if(r){var l=new Event(this._apiKey,(new Date).getTime(),"ry_profile",null,null,null,this._user?this._user.id:null,this._user?this._user.cid:null,this._userEId?this._userEId:null,null,null,n,this._info);this._api.track(l)}}catch(t){_logger.error("Fail to track identify with api.",t)}},Tracker.prototype._trackProfileGA=function(){try{var t=this,e=function(e){e&&!t._trackProfileGADone&&(t._trackProfile({ga:{id:e}}),t._trackProfileGADone=!0)},n=setTimeout(function(){n&&clearTimeout(n);try{if(window&&!_.isUndefined(window.ga)&&window.ga){var t=window.ga.getAll&&window.ga.getAll()&&window.ga.getAll().length&&window.ga.getAll()[0]?window.ga.getAll()[0].get("clientId"):null;t?e(t):window.ga(function(t){try{var n=t&&t.get?t.get("clientId"):null;(n=!n&&window.ga.getAll&&window.ga.getAll()&&window.ga.getAll().length&&window.ga.getAll()[0]?window.ga.getAll()[0].get("clientId"):n)&&e(n)}catch(t){_logger.error("Fail to exec ga profile.",t)}})}}catch(t){_logger.error("Fail to exec ga profile.",t)}},200)}catch(t){_logger.error("Fail to exec ga profile.",t)}},Tracker.prototype.trackLink=function(t,e,n){try{this._status==_trStatus.pending?this._queueAction("trackLink",arguments):this._status==_trStatus.enabled&&this._trackLink(t,e,n)}catch(t){_logger.error("Fail to track link.",t)}},Tracker.prototype._trackLink=function(t,e,n){try{var r=_selector.getDomElements(t);if(r&&_.isArray(r)&&r.length>=1)if(e)if(_.isString(e))for(var i=0;i<r.length;i++)r[i]&&this._trackLinkByElement(r[i],e,n);else _logger.warn("Unable to track link, event not a string.");else _logger.warn("Unable to track link, no event.")}catch(t){_logger.error("Fail to exec track link.",t)}},Tracker.prototype._trackLinkByElement=function(t,e,n){try{if(t&&e){var r=this;_listener.onEvent(t,"click",function(t,i){try{r.track(e,n);var o=i&&(i.which&&2===i.which||i.metaKey||i.ctrlKey)||t&&t.target&&"_blank"===t.target,s=t&&t.href?t.href:null;!o&&i&&(i.preventDefault?i.preventDefault():i.returnValue=!1,setTimeout(function(){window&&!_.isUndefined(s)&&null!=s&&(window.location=s)},_cfg.RDRCT_TIMEOUT))}catch(t){_logger.error("Fail to track link after click.",t)}})}}catch(t){_logger.error("Fail to track link on click.",t)}},Tracker.prototype.trackForm=function(t,e,n){try{this._status==_trStatus.pending?this._queueAction("trackForm",arguments):this._status==_trStatus.enabled&&this._trackForm(t,e,n)}catch(t){_logger.error("Fail to track form.",t)}},Tracker.prototype._trackForm=function(t,e,n){try{var r=_selector.getDomElements(t);if(r&&_.isArray(r)&&r.length>=1)if(e)if(_.isString(e))for(var i=0;i<r.length;i++)r[i]&&this._trackFormByElement(r[i],e,n);else _logger.warn("Unable to track form, event not a string.");else _logger.warn("Unable to track form, no event.")}catch(t){_logger.error("Fail to track form.",t)}},Tracker.prototype._trackFormByElement=function(t,e,n){try{if(t&&e){var r=this;_listener.onEvent(t,"submit",function(t,i){try{r.track(e,n),i&&(i.preventDefault?i.preventDefault():i.returnValue=!1,setTimeout(function(){t&&t.submit&&t.submit()},_cfg.RDRCT_TIMEOUT))}catch(t){_logger.error("Fail to track form after click.",t)}})}}catch(t){_logger.error("Fail to track form on click.",t)}},Tracker.prototype.transaction=function(t,e){try{this._status==_trStatus.pending?this._queueAction("transaction",arguments):this._status==_trStatus.enabled&&this._transaction(t,e)}catch(t){_logger.error("Fail to track transaction.",t)}},Tracker.prototype._transaction=function(t,e){try{if(_.isUndefined(t)||null==t||!_.isNumber(t)&&!_.isString(t))_logger.warn("Unable to track, no valid amount.");else{var n={};n.transaction=e&&_.isObject(e)?e:{},n.transaction.amount=t,this._track("ry_transaction",n)}}catch(t){_logger.error("Fail to track.",t)}};var Binder=function(t){this._ry=t,this._instances=[]};Binder.prototype.createTracker=function(t,e,n,r){var i=function(t,e,n,r){var i=null,o=_.env.isBot||RY._ot||!_cookie.support?_trStatus.disabled:n,s=r&&_.isObject(r)?r:null,c=!!(s&&s.xdm&&_cfg.XDM_ENABLED),a=!(s&&!1===s.syncAuto),l=!(!s||!0!==s.syncManual),u=s&&s.syncType?s.syncType.toString().toLowerCase():null;u||(a&&!l?u="auto":a||l?l&&(u="manual"):u="active"),"auto"!=u&&"active"!=u&&"manual"!=u&&"consent"!=u&&(u="auto");var f=["ry-br0v4113","ry-s0n41to2","ry-l4f02rfr","ry-l4f02rch","ry-th3f0rit","ry-t3f0rkbe","ry-t3f0rknl","ry-3ltenees","ry-loc2jui1","ry-fx33aenn","ry-021gos81","ry-h1m0ll4z","ry-b3l4mbra","ry-ty1rdrd3","ry-kj34qqz5","ry-och2w2l9"],d=!(!s||!s.syncUser);if(!d&&t&&f)for(var h=0;h<f.length;h++)if(f[h]&&f[h].toLowerCase()==t.toLowerCase()){d=!0;break}d=!!d;var p=!(!s||!s.syncTc),g=!(!s||!s.syncEu),y=s&&s.uidEu?s.uidEu.toString():null,m=s&&s.api&&_.isString(s.api)?s.api:null,v=s&&s.zone&&_.isString(s.zone)?s.zone:null,S=(v&&_cfg.URI_ZONES[v.toString().toUpperCase()]?_cfg.URI_ZONES[v.toString().toUpperCase()]:_cfg.URI_ZONES.EU).XDM,k=_cfg.HTTP_PROTOCOL+S+"/txd.html",w=new Storage(c?"xdm":"cookie",t,e,k,function(t){t||(o=_trStatus.disabled,i&&i.disable&&i.disable(!1))}),b=!(!s||!s.topReferrer),A=s&&!_.isUndefined(s.domain)?s.domain:_.noOvrd;A=A||null;var E=s&&!_.isUndefined(s.referrer)?s.referrer:_.noOvrd;E=E||null;var O=s&&!_.isUndefined(s.organic)?s.organic:null;O=null!=O?O:null;var U=s&&!_.isUndefined(s.url)?s.url:_.noOvrd;U=U||null;var T=s&&!_.isUndefined(s.userId)&&s.userId&&(_.isString(s.userId)||_.isNumber(s.userId))?s.userId:null;T=T?T.toString():null;var I=s&&!_.isUndefined(s.onInit)?s.onInit:null;return i=new Tracker(t,e,o,w,m,v,b,A,U,E,O,T,I,u,d,p,g,y),{_disable:function(){return i.disable.apply(i,arguments)},_enable:function(){return i.enable.apply(i,arguments)},_enableEvents:function(){return i.enableEvents.apply(i,arguments)},_syncScroll:function(){return i.syncScroll.apply(i,arguments)},consent:function(){return i.consent.apply(i,arguments)},getUserId:function(){return i.getUserId.apply(i,arguments)},identify:function(){return i.identify.apply(i,arguments)},page:function(){return i.page.apply(i,arguments)},profile:function(){return i.profile.apply(i,arguments)},queue:function(){return i.queue.apply(i,arguments)},refreshContext:function(){return i.refreshContext.apply(i,arguments)},reject:function(){return i.reject.apply(i,arguments)},sync:function(){return i.sync.apply(i,arguments)},track:function(){return i.track.apply(i,arguments)},trackLink:function(){return i.trackLink.apply(i,arguments)},trackForm:function(){return i.trackForm.apply(i,arguments)},trackSync:function(){return i.trackSync.apply(i,arguments)},transaction:function(){return i.transaction.apply(i,arguments)}}}(t,e,n,r);return this._instances.push(i),i},Binder.prototype.bindMainInstance=function(t){var e=this._ry[_cfg.MAIN_INSTANCE]=t;this._ry.consent=function(){return e.consent.apply(e,arguments)},this._ry.getUserId=function(){return e.getUserId.apply(e,arguments)},this._ry.identify=function(){return e.identify.apply(e,arguments)},this._ry.page=function(){return e.page.apply(e,arguments)},this._ry.profile=function(){return e.profile.apply(e,arguments)},this._ry.refreshContext=function(){return e.refreshContext.apply(e,arguments)},this._ry.reject=function(){return e.reject.apply(e,arguments)},this._ry.sync=function(){return e.sync.apply(e,arguments)},this._ry.track=function(){return e.track.apply(e,arguments)},this._ry.trackLink=function(){return e.trackLink.apply(e,arguments)},this._ry.trackForm=function(){return e.trackForm.apply(e,arguments)},this._ry.trackSync=function(){return e.trackSync.apply(e,arguments)},this._ry.transaction=function(){return e.transaction.apply(e,arguments)}},Binder.prototype.bindAllInstances=function(){if(this._ry._q)for(var t in this._ry._q){var e=this._ry._q[t].init;_.isArrayNullOrEmpty(e)||(_.isArrayNullOrEmpty(e[0])?_logger.warn("Fail to init new tracker, no api key."):(this._ry[t]=this.createTracker(e[0][0],t,_trStatus.pending,e[0].length>1&&e[0][1]&&_.isObject(e[0][1])?e[0][1]:null),t==_cfg.MAIN_INSTANCE&&this.bindMainInstance(this._ry[t])),this._ry._q[t].init=null)}},Binder.prototype.bindAllActions=function(){if(this._ry._q){for(var t in this._ry._q){var e={},n=null;for(var r in this._ry._q[t])if(r&&_.isString(r)){var i=[];this._ry._q[t][r]&&(i=this._ry._q[t][r]);var o=!1;"init"==r||"_q"==r||"page"!=r&&"consent"!=r&&"reject"!=r&&"identify"!=r&&"profile"!=r&&"sync"!=r&&"track"!=r&&"transaction"!=r&&"trackLink"!=r&&"trackForm"!=r||(o=!0),o&&(e[r]=i),"_q"==r&&(n=i)}this._ry[t]&&this._ry[t].queue&&this._ry[t].queue(e,n),this._ry._q[t]=null,this._ry[t]&&this._ry[t]._enable&&this._ry[t]._enable()}this._ry._q={}}},Binder.prototype.bindAllActionsEvent=function(){if(this._instances)for(var t=0;t<this._instances.length;t++){var e=this._instances[t];e&&e._enableEvents&&e._enableEvents()}},Binder.prototype.bindAllActionsScroll=function(){if(this._instances)for(var t=0;t<this._instances.length;t++){var e=this._instances[t];e&&e._syncScroll&&e._syncScroll()}};try{var _binder=new Binder(RY);function onDomLoaded(){try{onDomLoaded.set||(onDomLoaded.set=!0,_binder.bindAllActionsEvent())}catch(t){_logger.error("Fail to bind tracker on DOM loaded.",t)}}function onDomScrolled(){try{onDomScrolled.set||(onDomScrolled.set=!0,_binder.bindAllActionsScroll())}catch(t){_logger.error("Fail to bind tracker on DOM scrolled.",t)}}_binder.bindAllInstances(),RY._otf=function(){try{for(var t in RY._ot=1,RY)_.isObject(RY[t])&&_.isFunction(RY[t]._disable)&&RY[t]._disable(!0)}catch(t){_logger.error("Fail to disable tracker.",t)}},RY.init=function(t,e){try{var n=e?_.isObject(e)&&e.name?e.name:null:_.isString(e)?e:null;if(!t)return void _logger.warn("Fail to init, invalid apiKey.");var r=n||_cfg.MAIN_INSTANCE;RY[r]||(RY[r]=_binder.createTracker(t,r,_trStatus.enabled,e&&_.isObject(e)?e:null),r==_cfg.MAIN_INSTANCE&&_binder.bindMainInstance(RY[r]))}catch(t){_logger.error("Fail to init with apiKey.",t)}},_binder.bindAllInstances(),_binder.bindAllActions(),_listener.onLoaded(onDomLoaded),_listener.onScrolled(onDomScrolled)}catch(t){_logger.error("Fail to init SDK.",t)}}var _instance,_enabled,_initDone,_init,xdm}(window.RY||{});